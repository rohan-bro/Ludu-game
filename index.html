<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ludo Game</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #f0f0f0; }
        #board { display: grid; grid-template-columns: repeat(15, 40px); grid-template-rows: repeat(15, 40px); margin: 20px auto; border: 2px solid #000; }
        .cell { width: 40px; height: 40px; border: 1px solid #ccc; position: relative; }
        .red { background: #ffcccc; }
        .blue { background: #ccccff; }
        .green { background: #ccffcc; }
        .yellow { background: #ffffcc; }
        .home { background: #fff; }
        .piece { width: 30px; height: 30px; border-radius: 50%; position: absolute; top: 5px; left: 5px; cursor: pointer; }
        .red-piece { background: red; }
        .blue-piece { background: blue; }
        .green-piece { background: green; }
        .yellow-piece { background: yellow; }
        #dice { font-size: 24px; margin: 10px; }
        button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Ludo Game</h1>
    <div id="board"></div>
    <div id="dice">Roll: <span id="diceValue">-</span></div>
    <button id="rollDice">Roll Dice</button>
    <button id="resetGame">Reset Game</button>
    <p>Current Player: <span id="currentPlayer">Red</span></p>

    <script>
        // Simple Ludo game logic
        const board = document.getElementById('board');
        const diceValue = document.getElementById('diceValue');
        const rollDiceBtn = document.getElementById('rollDice');
        const resetBtn = document.getElementById('resetGame');
        const currentPlayerSpan = document.getElementById('currentPlayer');

        let players = ['red', 'blue', 'green', 'yellow'];
        let currentPlayer = 0;
        let diceRoll = 0;
        let pieces = {
            red: [0, 0, 0, 0], // Positions: 0 = home, 1-52 = board, 53-56 = home stretch
            blue: [0, 0, 0, 0],
            green: [0, 0, 0, 0],
            yellow: [0, 0, 0, 0]
        };

        // Function to convert number to word
        function numberToWord(num) {
            const words = ['zero', 'one', 'two', 'three', 'four', 'five', 'six'];
            return words[num] || num.toString();
        }

        // Create board (simplified grid)
        for (let i = 0; i < 225; i++) {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            if (i < 15) cell.classList.add('red');
            else if (i % 15 === 0) cell.classList.add('blue');
            else if (i > 209) cell.classList.add('green');
            else if (i % 15 === 14) cell.classList.add('yellow');
            else cell.classList.add('home');
            board.appendChild(cell);
        }

        function updateBoard() {
            // Clear pieces
            document.querySelectorAll('.piece').forEach(p => p.remove());
            // Add pieces
            players.forEach(color => {
                pieces[color].forEach((pos, idx) => {
                    if (pos > 0) {
                        const cell = board.children[pos - 1];
                        const piece = document.createElement('div');
                        piece.classList.add('piece', `${color}-piece`);
                        piece.dataset.color = color;
                        piece.dataset.index = idx;
                        piece.addEventListener('click', () => movePiece(color, idx));
                        cell.appendChild(piece);
                    }
                });
            });
        }

        function rollDice() {
            diceRoll = Math.floor(Math.random() * 6) + 1;
            diceValue.textContent = numberToWord(diceRoll);  // Shows word instead of number
        }

        function movePiece(color, index) {
            if (color !== players[currentPlayer] || diceRoll === 0) return;
            pieces[color][index] += diceRoll;
            if (pieces[color][index] > 56) pieces[color][index] = 56; // Cap at home
            diceRoll = 0;
            updateBoard();
            checkWin();
            currentPlayer = (currentPlayer + 1) % players.length;
            currentPlayerSpan.textContent = players[currentPlayer].charAt(0).toUpperCase() + players[currentPlayer].slice(1);
        }

        function checkWin() {
            // Simple win check: all pieces home
            if (pieces[players[currentPlayer]].every(p => p >= 56)) {
                alert(`${players[currentPlayer]} wins!`);
                resetGame();
            }
        }

        function resetGame() {
            pieces = { red: [0,0,0,0], blue: [0,0,0,0], green: [0,0,0,0], yellow: [0,0,0,0] };
            currentPlayer = 0;
            diceRoll = 0;
            updateBoard();
            currentPlayerSpan.textContent = 'Red';
        }

        rollDiceBtn.addEventListener('click', rollDice);
        resetBtn.addEventListener('click', resetGame);
        updateBoard();

        // Register service worker for offline play
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
